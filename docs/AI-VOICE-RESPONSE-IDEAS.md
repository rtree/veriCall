# VeriCall AI音声応答 - アイデア

## 基本フロー

```
着信 → ホワイトリスト判定
         ├─ ✅ 登録済み → 転送
         └─ ❌ 未登録 → AI受付
                          ├─ 音声認識（発信者の用件を聞く）
                          ├─ AI応答（Gemini）
                          ├─ 会話ログ保存
                          └─ オーナーに通知（メール/SMS）
```

## 機能案

### 1. AI秘書モード
- 用件を聞いて記録
- 後でオーナーが確認
- 折り返し要否の判定

### 2. スクリーニング
- 重要度を AI が判定
- 緊急なら転送
- そうでなければ伝言

### 3. FAQ応答
- よくある質問に自動回答
- 営業時間、場所など
- カスタムFAQリスト

### 4. 予約受付
- 日程調整
- カレンダー連携
- 確認メール送信

## 技術スタック

| コンポーネント | 技術 | 用途 |
|----------------|------|------|
| 音声認識 | Twilio `<Gather speech>` | 発信者の音声をテキスト化 |
| AI応答生成 | Gemini 2.5 Flash | 自然な応答を生成 |
| 音声合成 | Twilio `<Say>` / Google TTS | テキストを音声化 |
| 証明 | Vlayer | 会話内容をオンチェーン証明 |

## 実装アプローチ

### Option A: Twilio Gather + Gemini（シンプル）

```
1. 発信者が話す
2. Twilio Speech-to-Text で認識
3. speechTimeout で無音検知
4. テキストを Gemini に送信
5. 応答を TTS で読み上げ
6. 繰り返し or 終了
```

**メリット**: 実装簡単、安定
**デメリット**: ターン制会話（リアルタイムではない）

### Option B: Twilio Media Streams + Gemini Live API（高度）

```
1. WebSocket で音声ストリーム受信
2. Gemini Live API にリアルタイム送信
3. 応答音声をリアルタイムで返す
```

**メリット**: 自然な会話、割り込み可能
**デメリット**: 実装複雑、コスト高

## 推奨実装順序

1. **Phase 1**: AI秘書モード（Option A）
   - 用件を聞く → 記録 → メール通知
   
2. **Phase 2**: スクリーニング追加
   - 緊急判定 → 転送 or 伝言
   
3. **Phase 3**: Vlayer証明
   - 会話ログをオンチェーン化
   
4. **Phase 4**: リアルタイム化（Option B）
   - より自然な会話体験

## 次のアクション

- [ ] Gemini 2.5 Flash API セットアップ
- [ ] Twilio Gather による音声認識テスト
- [ ] AI応答ルートの実装
- [ ] 会話ログ保存の実装
